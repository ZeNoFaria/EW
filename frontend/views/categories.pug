extends layout

block content
  .container.mt-4
    .row.mb-4
      .col-12
        h2.mb-4 Categories
        
        if categories && categories.length > 0
          .row
            each category in categories
              .col-md-6.col-lg-4.mb-4
                .card.shadow-sm
                  .card-body
                    .d-flex.justify-content-between.align-items-center.mb-3
                      h5.card-title
                        i(class=category.icon || 'fas fa-folder').me-2
                        = category.name
                      span.badge.bg-primary= category.count || 0
                    
                    p.card-text= category.description || 'No description available'
                    
                    if category.recentItems && category.recentItems.length > 0
                      h6.mt-3 Recent Items:
                      ul.list-unstyled.small
                        each item in category.recentItems.slice(0, 3)
                          li.mb-1
                            a.text-decoration-none(href=`/entry/${item.id}`)= item.title
                            small.text-muted.ms-2= item.date
                    
                    .d-flex.justify-content-between.align-items-center.mt-3
                      small.text-muted Last update: #{category.lastUpdate || 'N/A'}
                      a.btn.btn-outline-primary.btn-sm(href=`/category/${category.slug}`) View All
        else
          .text-center.py-5
            i.fas.fa-folder-open.fa-3x.text-muted.mb-3
            h3.text-muted No categories found
            p.text-muted Start creating content to see categories appear here.
            if isAuthenticated
              a.btn.btn-primary(href="/entry/new") Create Your First Entry

    // Stats section
    if totalItems || activeCategories
      .row.mt-5
        .col-12
          h3.mb-4 Statistics
          .row
            .col-md-3.mb-3
              .card.text-center.bg-light
                .card-body
                  h4.text-primary= totalItems || 0
                  small Total Items
            .col-md-3.mb-3
              .card.text-center.bg-light
                .card-body
                  h4.text-success= activeCategories || 0
                  small Active Categories
            .col-md-3.mb-3
              .card.text-center.bg-light
                .card-body
                  h4.text-info= publicItems || 0
                  small Public Items
            .col-md-3.mb-3
              .card.text-center.bg-light
                .card-body
                  h6.text-secondary= lastItemDate || 'N/A'
                  small Last Update

    // Popular tags section
    if tags && tags.length > 0
      .row.mt-5
        .col-12
          h3.mb-4 Popular Tags
          .tag-cloud
            each tag in tags.slice(0, 20)
              a.btn.btn-outline-secondary.btn-sm.me-2.mb-2(href=`/tag/${tag.slug}`)
                = tag.name
                if tag.count
                  span.badge.bg-secondary.ms-1= tag.count